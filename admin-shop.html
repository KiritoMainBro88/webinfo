<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Shop Edit - KMB</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- === UPDATE CSS VERSION === -->
    <link rel="stylesheet" href="style.css?v=1.9.2">
    <link rel="stylesheet" href="admin-style.css?v=1.1"> <!-- Keep admin style version if unchanged -->
</head>
<body class="dark-theme">

    <!-- ===== ADDED HEADER ===== -->
    <header class="content-header">
        <div class="header-inner">
             <div class="header-left">
                <div class="logo-and-mobile-toggle">
                     <a href="index.html" class="logo-link">
                        <img src="images/logo-cat.jpg" alt="KMB Logo" class="logo-image">
                        <span class="logo-text">KiritoMainBro</span>
                     </a>
                     <button id="mobile-menu-toggle" class="icon-button mobile-nav-toggle" aria-label="Toggle Mobile Menu" aria-expanded="false">
                         <i class="fas fa-bars"></i>
                     </button>
                </div>
             </div>
             <nav class="header-nav">
                 <a href="index.html" class="header-nav-link">
                     <i class="fas fa-home fa-fw"></i> <span class="nav-link-text">Trang chính</span>
                 </a>
                 <div class="nav-item-wrapper"> <!-- Wrapper for dropdown -->
                     <a href="#" class="header-nav-link nav-dropdown-trigger">
                         <i class="fas fa-cogs fa-fw"></i>
                         <span class="nav-link-text">Dịch vụ</span>
                         <i class="fas fa-chevron-down nav-chevron"></i>
                     </a>
                     <div class="dropdown-menu">
                         <a href="shopping.html" class="dropdown-link" id="shopping-link">
                             <i class="fas fa-shopping-bag fa-fw icon-left"></i> Mua hàng
                         </a>
                         <a href="#" class="dropdown-link" id="deposit-link">
                             <i class="fas fa-credit-card fa-fw icon-left"></i> Nạp tiền
                         </a>
                         <a href="history.html" class="dropdown-link" id="history-link"> <!-- Link to history page -->
                             <i class="fas fa-history fa-fw icon-left"></i> Lịch sử mua hàng
                         </a>
                     </div>
                 </div>
             </nav>
             <div class="header-right">
                 <button id="donate-button-header" class="cta-button donate-header-button">
                    <i class="fas fa-donate icon-left"></i>
                    <span class="donate-text">Donate</span>
                </button>
                 <button id="language-toggle" class="icon-button" aria-label="Change Language"> <i class="fas fa-globe"></i> </button>
                 <button id="theme-toggle" class="icon-button" aria-label="Toggle Theme"> <i class="fas fa-moon"></i> </button>
                 <div class="user-area" id="user-area-trigger">
                     <img id="user-avatar" src="images/cat-avatar-default.jpg" alt="User Avatar" class="user-avatar-img">
                     <span id="user-status"> <span id="user-name">Khách</span> <i class="fas fa-chevron-down user-area-chevron"></i> </span>
                     <!-- UPDATED User Dropdown Content -->
                     <div class="user-dropdown-content" id="user-dropdown">
                         <!-- Login/Register/Forgot Links (shown when logged out) -->
                         <a href="#" class="auth-link" id="auth-action-link" style="display: flex;"><i class="fas fa-sign-in-alt icon-left"></i>Đăng Nhập</a>
                         <a href="#" class="auth-link" id="register-action-link" style="display: flex;"><i class="fas fa-user-plus icon-left"></i>Tạo Tài Khoản</a>
                         <a href="#" class="auth-link" id="forgot-action-link" style="display: flex;"><i class="fas fa-key icon-left"></i>Quên Mật Khẩu?</a>

                         <!-- Admin Links (shown only to logged-in admins) -->
                         <div id="admin-dropdown-section" style="display: none;">
                             <hr style="margin: 0.5rem 0; border-color: var(--border-primary);"> <!-- Separator -->
                             <a href="admin-page-edit.html" class="admin-link"><i class="fas fa-edit icon-left"></i>Admin Page Edit</a>
                             <a href="admin-shop.html" class="admin-link active"><i class="fas fa-store icon-left"></i>Admin Shop Edit</a>
                             <a href="admin-server-edit.html" class="admin-link"><i class="fas fa-server icon-left"></i>Admin Server Edit</a>
                             <hr style="margin: 0.5rem 0; border-color: var(--border-primary);"> <!-- Separator -->
                         </div>

                          <!-- Logout Link (shown when logged in) -->
                         <a href="#" id="logout-link" style="display: none;"><i class="fas fa-sign-out-alt icon-left"></i>Đăng Xuất</a>
                     </div>
                     <!-- End UPDATED User Dropdown Content -->
                 </div>
             </div>
         </div> <!-- End header-inner -->
    </header>

    <!-- Mobile Navigation Menu (Consider adjusting links for admin context) -->
    <nav id="mobile-nav" class="mobile-nav-menu">
        <a href="index.html" class="mobile-nav-link"><i class="fas fa-home fa-fw"></i> Trang chính</a>
        <a href="shopping.html" class="mobile-nav-link"><i class="fas fa-shopping-bag fa-fw"></i> Mua hàng</a>
        <a href="#" class="mobile-nav-link" id="deposit-link-mobile"><i class="fas fa-credit-card fa-fw"></i> Nạp tiền</a>
        <a href="history.html" class="mobile-nav-link" id="history-link-mobile"><i class="fas fa-history fa-fw"></i> Lịch sử mua hàng</a>
        <hr>
        <a href="admin-page-edit.html" class="mobile-nav-link"><i class="fas fa-edit fa-fw"></i> Admin Page</a>
        <a href="admin-shop.html" class="mobile-nav-link active"><i class="fas fa-store fa-fw"></i> Admin Shop</a>
        <a href="admin-server-edit.html" class="mobile-nav-link"><i class="fas fa-server fa-fw"></i> Admin Server</a>
    </nav>
    <!-- ======================= -->

    <div class="admin-page-wrapper">
        <h1><i class="fas fa-store"></i> KMB Shop Admin Panel</h1>

        <div id="admin-auth-check" style="display: block; text-align: center; padding: 1rem; background-color: var(--bg-tertiary); border-radius: var(--border-radius-md); margin-bottom: 1rem;">
            Checking authorization... (NOTE: Real security needed!)
        </div>

        <div id="admin-content" style="display: none;">

            <section id="category-management">
                <h2><i class="fas fa-tags"></i> Manage Categories</h2>
                <form id="add-category-form">
                     <input type="hidden" id="edit-category-id" value="">
                     <h3>Add / Edit Category</h3>
                     <div class="form-group"> <label for="new-cat-name">Category Name</label> <input type="text" id="new-cat-name" required> </div>
                     <div class="form-group"> <label for="new-cat-icon">Font Awesome Icon Class</label> <input type="text" id="new-cat-icon" placeholder="fas fa-tag"> </div>
                     <div class="form-group"> <label for="category-icon-upload">Upload Icon Image (Optional)</label> <input type="file" id="category-icon-upload" name="categoryIconImage" accept="image/*"> <small>Recommended size: 32x32px. Max size: 1MB. Formats: PNG, JPG, WEBP</small> </div>
                     <div class="form-group"> <label for="new-cat-order">Display Order</label> <input type="number" id="new-cat-order" value="0" min="0"> </div>
                     <div class="form-group admin-form-actions"> <button type="submit" class="cta-button primary">Save Category</button> <button type="button" id="cancel-edit-category" class="cta-button secondary" style="display: none;">Cancel Edit</button> <p id="cat-message" class="admin-message"></p> </div>
                 </form>
                 <hr>
                 <h3>Existing Categories</h3>
                 <div id="category-list">Loading...</div>
            </section>

            <section id="product-management">
                 <h2><i class="fas fa-boxes"></i> Manage Products</h2>
                 <form id="add-product-form"> <h3>Add/Edit Product</h3> <input type="hidden" id="edit-product-id" value=""> <div class="form-group"> <label for="product-name">Product Name</label> <input type="text" id="product-name" name="name" required> </div> <div class="form-group"> <label for="product-category">Category</label> <select id="product-category" name="category" required> <option value="">-- Select Category --</option> </select> </div> <div class="form-group"> <label for="product-price">Price (VND)</label> <input type="number" id="product-price" name="price" required min="0" step="1000"> </div> <div class="form-group"> <label for="product-original-price">Original Price (Optional)</label> <input type="number" id="product-original-price" name="originalPrice" min="0" step="1000"> </div>
                    <div class="form-group">
                        <label for="product-brand">Brand (Optional)</label>
                        <input type="text" id="product-brand" name="brand">
                    </div>
                 <div class="form-group"> <label for="product-image">Image URL (Optional)</label> <input type="text" id="product-image" name="imageUrl" placeholder="Leave empty if uploading image file"> </div>
                     <div class="form-group"> <label for="product-image-upload">Upload Product Image</label> <input type="file" id="product-image-upload" name="productImage" accept="image/*"> </div>
                     <div class="form-group"> <label for="product-tags">Tags (comma-separated)</label> <input type="text" id="product-tags" name="tags"> </div>
                     <div class="form-group"> <label for="product-stock">Stock Status</label> <select id="product-stock" name="stockStatus"> <option value="in_stock">In Stock</option> <option value="out_of_stock">Out of Stock</option> <option value="contact">Contact for details</option> <option value="check_price">Check Price List</option> </select> </div> <div class="form-group"> <label for="product-order">Display Order</label> <input type="number" id="product-order" name="displayOrder" value="0" min="0"> </div> <div class="form-group form-group-full"> <label for="product-description">Description</label> <textarea id="product-description" name="description" rows="4"></textarea> </div> <div class="form-group admin-form-actions"> <button type="submit" class="cta-button primary">Save Product</button> <button type="button" id="cancel-edit-product" class="cta-button secondary" style="display: none;">Cancel Edit</button> <p id="product-message" class="admin-message"></p> </div> </form> <hr> <h3>Existing Products</h3> <div id="product-list">Loading...</div>
            </section>

        </div>
    </div>

    <!-- === SCRIPTS === -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <!-- === UPDATE SCRIPT VERSION === -->
    <script src="script.js?v=1.9.2"></script>
    <!-- Load admin script -->
    <script src="admin.js?v=1.2.1"></script> <!-- Updated admin script version -->
</body>
</html>